const PLUGIN_NAME="code_view",BUTTON_TOOL_TIP="Toggle code view mode";tinymce.PluginManager.add("code_view",function(e,i){let t=!0;e.ui.registry.addButton("code_view",{icon:"sourcecode",tooltip:BUTTON_TOOL_TIP,onAction:function(){o(this,e)}}),$("#"+e.id).on("change",function(){e.setContent($(this).val())});const o=(e,i)=>{t=!t;const o="ace-editor-"+i.id;if(t){if(i.mode.set("design"),$("#"+i.id).hide(),"undefined"!=typeof ace){ace.edit(o).destroy(),$("#"+o).remove()}}else if(i.mode.set("readonly"),$(`[aria-label="${BUTTON_TOOL_TIP}"]`).removeClass("tox-tbtn--disabled"),$(`[aria-label="${BUTTON_TOOL_TIP}"]`).removeAttr("aria-disabled"),$(`[aria-label="${BUTTON_TOOL_TIP}"]`).css("cursor","pointer"),$(`[aria-label="${BUTTON_TOOL_TIP}"]`).find("svg").css("fill","#222f3e"),$("#"+i.id)[0].value=i.dom.decode(i.getContent({source_view:!0})),$("#"+i.id).css("height",$(i.getDoc()).height()+"px").show(),"undefined"!=typeof ace){const e=$("#"+i.id).hide();$("#"+i.id).after('<div id="'+o+'"></div>');const t=ace.edit(o);t.$blockScrolling="Infinity",t.setTheme("ace/theme/chrome"),t.session.setMode("ace/mode/html_ruby"),t.setValue(e.val(),1),t.setOptions({wrap:!0,displayIndentGuides:!0,highlightActiveLine:!1,showPrintMargin:!1,minLines:Math.round(300/17),maxLines:Math.round(300/17)}),t.on("change",function(){e.val(t.getValue()).trigger("keyup"),i.setContent(t.getValue())})}}});